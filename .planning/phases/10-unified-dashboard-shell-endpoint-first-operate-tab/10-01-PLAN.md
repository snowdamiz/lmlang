---
phase: 10-unified-dashboard-shell-endpoint-first-operate-tab
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - crates/lmlang-server/src/handlers/dashboard.rs
  - crates/lmlang-server/src/handlers/mod.rs
  - crates/lmlang-server/src/router.rs
  - crates/lmlang-server/static/dashboard/index.html
  - crates/lmlang-server/static/dashboard/app.js
  - crates/lmlang-server/static/dashboard/styles.css
  - crates/lmlang-server/tests/integration_test.rs
autonomous: true
requirements:
  - UI-01
  - UI-02

must_haves:
  truths:
    - "Unified dashboard is served at /programs/{id}/dashboard with explicit Operate and Observe tabs"
    - "Observe tab reuses the existing observability UX path instead of duplicating backend data routes"
    - "Dashboard static assets are served by lmlang-server with program-id aware URL wiring"
    - "Dashboard shell has stable mount points for Operate controls, Observe container, and shared status messaging"
  artifacts:
    - path: "crates/lmlang-server/src/handlers/dashboard.rs"
      provides: "HTTP handlers for dashboard HTML and static assets"
      contains: "dashboard"
    - path: "crates/lmlang-server/src/router.rs"
      provides: "Route wiring for /programs/{id}/dashboard and dashboard assets"
      contains: "dashboard"
    - path: "crates/lmlang-server/static/dashboard/index.html"
      provides: "Unified shell with Operate/Observe tabs and section containers"
      min_lines: 90
    - path: "crates/lmlang-server/tests/integration_test.rs"
      provides: "Route-level checks for dashboard entrypoint and static assets"
      contains: "dashboard"
  key_links:
    - from: "crates/lmlang-server/src/router.rs"
      to: "crates/lmlang-server/src/handlers/dashboard.rs"
      via: "Router exposes dashboard route family through dedicated handlers"
      pattern: "dashboard"
    - from: "crates/lmlang-server/static/dashboard/index.html"
      to: "crates/lmlang-server/static/observability/index.html"
      via: "Observe tab reuses existing observability surface rather than reimplementation"
      pattern: "observability"
    - from: "crates/lmlang-server/tests/integration_test.rs"
      to: "crates/lmlang-server/src/router.rs"
      via: "Integration tests verify dashboard routes are reachable and correctly bound"
      pattern: "dashboard"
---

<objective>
Establish the unified dashboard shell and route wiring for Phase 10.

Purpose: Create the structural foundation for one program-level dashboard with Operate and Observe modules.
Output: New dashboard handlers/routes/static shell with tab scaffolding and Observe reuse mount.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-RESEARCH.md
@crates/lmlang-server/src/router.rs
@crates/lmlang-server/src/handlers/observability.rs
@crates/lmlang-server/static/observability/index.html
@crates/lmlang-server/tests/integration_test.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add dashboard handlers and route family</name>
  <files>
    crates/lmlang-server/src/handlers/dashboard.rs
    crates/lmlang-server/src/handlers/mod.rs
    crates/lmlang-server/src/router.rs
    crates/lmlang-server/tests/integration_test.rs
  </files>
  <action>
    Create dedicated handlers to serve:
    - GET /programs/{id}/dashboard
    - GET /programs/{id}/dashboard/app.js
    - GET /programs/{id}/dashboard/styles.css

    Wire routes into the main router and add integration tests that validate route availability and asset content signatures.
  </action>
  <verify>
    `cargo test --package lmlang-server --test integration_test` passes with dashboard route checks.
  </verify>
  <done>
    Dashboard route family is reachable and program-aware from the existing axum server.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build unified shell with Operate and Observe tab scaffolding</name>
  <files>
    crates/lmlang-server/static/dashboard/index.html
    crates/lmlang-server/static/dashboard/app.js
    crates/lmlang-server/static/dashboard/styles.css
  </files>
  <action>
    Build the dashboard shell with:
    - top-level program context header
    - tab navigation for Operate and Observe
    - Operate workspace containers for agents, run setup, actions, and timeline/history preview
    - Observe container that mounts/reuses existing observability UX path
    - shared status panel for action results/errors

    Keep layout responsive for desktop and mobile.
  </action>
  <verify>
    Manual browser smoke check confirms tab switching and Observe mount behavior, plus route-level static asset tests.
  </verify>
  <done>
    Unified dashboard shell is ready for endpoint-first Operate implementation without backend API expansion.
  </done>
</task>

</tasks>

<verification>
1. /programs/{id}/dashboard serves an HTML shell with Operate and Observe tabs
2. dashboard app.js and styles.css are served by lmlang-server routes
3. Observe tab is wired to existing observability surface
4. Shell exposes explicit DOM mount points for Operate modules used in Plan 10-02
5. Integration tests cover dashboard route + asset delivery
</verification>

<success_criteria>
- Unified dashboard route exists and is reachable for any loaded program
- Observe reuse strategy is wired at shell level with no backend duplication
- Operate and Observe layout foundation is complete for follow-on implementation
</success_criteria>

<output>
After completion, create `.planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-01-SUMMARY.md`
</output>

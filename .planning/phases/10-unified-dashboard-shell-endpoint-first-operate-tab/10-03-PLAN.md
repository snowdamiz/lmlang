---
phase: 10-unified-dashboard-shell-endpoint-first-operate-tab
plan: 03
type: execute
wave: 3
depends_on:
  - "10-01"
  - "10-02"
files_modified:
  - crates/lmlang-server/static/dashboard/index.html
  - crates/lmlang-server/static/dashboard/app.js
  - crates/lmlang-server/static/dashboard/styles.css
  - crates/lmlang-server/tests/integration_test.rs
  - README.md
  - .planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-VERIFICATION.md
autonomous: true
requirements:
  - UI-01
  - UI-02

must_haves:
  truths:
    - "Observe tab behavior in /dashboard uses existing observability graph/query endpoints and UX"
    - "Operate and Observe can be used in one session without route-level context loss"
    - "Dashboard route, assets, and cross-tab integration are covered by integration evidence"
    - "Phase verification document maps UI-01 and UI-02 to concrete tests and manual checks"
  artifacts:
    - path: "crates/lmlang-server/static/dashboard/app.js"
      provides: "Cross-tab state sync and Observe-mount integration behavior"
      contains: "observe|observability|tab"
    - path: "crates/lmlang-server/tests/integration_test.rs"
      provides: "Coverage for dashboard route and observe reuse contract"
      contains: "dashboard"
    - path: ".planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-VERIFICATION.md"
      provides: "Requirement evidence matrix for UI-01 and UI-02"
      min_lines: 60
    - path: "README.md"
      provides: "Developer/operator docs for unified dashboard route and usage"
      contains: "/programs/{id}/dashboard"
  key_links:
    - from: "crates/lmlang-server/static/dashboard/app.js"
      to: "crates/lmlang-server/static/observability/app.js"
      via: "Dashboard Observe integration delegates graph/query UX to existing observability module"
      pattern: "observability"
    - from: "crates/lmlang-server/tests/integration_test.rs"
      to: "crates/lmlang-server/src/router.rs"
      via: "Integration tests validate unified dashboard and observability route coexistence"
      pattern: "dashboard|observability"
    - from: ".planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-VERIFICATION.md"
      to: "crates/lmlang-server/tests/integration_test.rs"
      via: "Verification references test evidence proving Phase 10 requirement coverage"
      pattern: "UI-01|UI-02|dashboard"
---

<objective>
Finalize unified Operate/Observe integration quality and evidence for Phase 10 completion.

Purpose: Ensure the dashboard experience is cohesive, test-backed, and documented before moving to approval-gate work.
Output: Polished cross-tab behavior, integration tests, verification evidence, and route documentation.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-RESEARCH.md
@.planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-01-SUMMARY.md
@.planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-02-SUMMARY.md
@crates/lmlang-server/src/router.rs
@crates/lmlang-server/static/observability/index.html
@crates/lmlang-server/static/dashboard/index.html
@crates/lmlang-server/static/dashboard/app.js
@crates/lmlang-server/tests/integration_test.rs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Harden Observe reuse integration and cross-tab session behavior</name>
  <files>
    crates/lmlang-server/static/dashboard/index.html
    crates/lmlang-server/static/dashboard/app.js
    crates/lmlang-server/static/dashboard/styles.css
  </files>
  <action>
    Refine dashboard tab behavior so Observe reuse is stable during Operate actions:
    - preserve selected program and session context when switching tabs
    - provide explicit "open in Observe" transitions from Operate outputs where relevant
    - maintain responsive behavior and clear status feedback for both tabs

    Keep Observe data flow delegated to existing observability routes.
  </action>
  <verify>
    Manual cross-tab walkthrough confirms no context loss and that Observe remains functional after Operate actions.
  </verify>
  <done>
    Operate and Observe function as one coherent dashboard workflow.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add integration evidence, docs, and requirement verification mapping</name>
  <files>
    crates/lmlang-server/tests/integration_test.rs
    README.md
    .planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-VERIFICATION.md
  </files>
  <action>
    Extend integration tests for dashboard route + observability reuse expectations, then document dashboard usage in README.
    Create `10-VERIFICATION.md` mapping UI-01 and UI-02 to:
    - automated test evidence
    - manual smoke checks
    - known deferred items for Phase 11/12
  </action>
  <verify>
    `cargo test --package lmlang-server --test integration_test` passes and verification doc cites concrete evidence.
  </verify>
  <done>
    Phase 10 has auditable evidence and docs for unified dashboard behavior and requirement coverage.
  </done>
</task>

</tasks>

<verification>
1. Observe tab integration uses existing observability routes in the unified dashboard
2. Operate and Observe tab switches preserve program/session context
3. Integration tests validate dashboard route + observability coexistence
4. README documents how to access and use /programs/{id}/dashboard
5. 10-VERIFICATION.md maps UI-01 and UI-02 to test/manual evidence
</verification>

<success_criteria>
- Unified dashboard is stable enough to support upcoming approval-gate work (Phase 11)
- Requirement evidence for UI-01 and UI-02 is explicit and reviewable
- Developers/operators can discover and use the dashboard flow from repository docs
</success_criteria>

<output>
After completion, create `.planning/phases/10-unified-dashboard-shell-endpoint-first-operate-tab/10-03-SUMMARY.md`
</output>
